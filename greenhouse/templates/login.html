{% load static %}
<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Login - Estufa Inteligente</title>

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
    />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap"
      rel="stylesheet"
    />

    <style>
      body {
        margin: 0;
        height: 100vh;
        overflow: hidden;
        font-family: "Poppins", sans-serif;
        background-color: #f8f9fa;
      }

      .split-container {
        display: flex;
        height: 100vh;
        width: 100%;
      }

      .left-side {
        flex: 1;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        text-align: center;
        padding: 3rem;
        color: #fff;

        background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)),
          url("{% static 'img/greenhouse.jpg' %}") no-repeat center center;
        background-size: cover;

        border-top-right-radius: 20px;
        border-bottom-right-radius: 20px;

        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        position: relative;
        z-index: 1;
      }

      .left-side h2 {
        font-weight: 600;
        font-size: 2.2rem;
      }

      .left-side p {
        font-size: 1.1rem;
        color: rgba(255, 255, 255, 0.8);
      }

      .right-side {
        flex: 1;
        display: flex;
        align-items: center;
        justify-content: center;
        background-color: #f8f9fa;
      }

      .login-card {
        background: transparent;
        box-shadow: none;
        width: 100%;
        max-width: 550px;
        padding: 2.5rem;
      }

      .login-card h3 {
        color: #4b912a;
        font-weight: 700;
        text-align: center;
        margin-bottom: 2.2rem;
      }

      .form-control {
        padding: 1rem;
        border-radius: 10px;
      }

      .btn-success {
        background-color: #4b912a;
        border: none;
        border-radius: 10px;
        font-weight: 600;
        padding: 1rem;
      }

      .btn-success:hover {
        background-color: #4b912a;
      }

      .password-container,
      .username-container {
        position: relative;
      }

      .input-icon {
        position: absolute;
        right: 15px;
        top: 50%;
        transform: translateY(-50%);
        color: #777;
      }

      .toggle-password {
        cursor: pointer;
      }

      @media (max-width: 992px) {
        .left-side {
          display: none;
        }
        .right-side {
          flex: 1;
          width: 100%;
          justify-content: center;
        }
        .login-card {
          padding: 1.5rem;
        }
      }
    </style>
  </head>

  <body>
    <div class="split-container">
      <div class="left-side">
        <i class="fa-solid fa-seedling fa-3x mb-3"></i>
        <h2>Estufa Inteligente</h2>
        <p>Automação e monitoramento ambiental</p>
      </div>

      <div class="right-side">
        <div class="login-card">
          <h3 class="mb-4">Informações de Login</h3>

          {% if form.errors %}
          <div class="alert alert-danger text-center py-2">
            Usuário ou senha incorretos.
          </div>
          {% endif %}

          <form method="post">
            {% csrf_token %}

            <div class="mb-3">
              <label for="id_username" class="form-label">Usuário</label>
              <div class="username-container">
                <input
                  type="text"
                  name="username"
                  class="form-control"
                  id="id_username"
                  placeholder="Nome de usuário"
                  required
                />
                <span class="input-icon">
                  <i class="fa fa-user"></i>
                </span>
              </div>
            </div>

            <div class="mb-3">
              <label for="id_password" class="form-label">Senha</label>
              <div class="password-container">
                <input
                  type="password"
                  name="password"
                  class="form-control"
                  id="id_password"
                  placeholder="Sua senha"
                  required
                />
                <span
                  class="input-icon toggle-password"
                  onclick="togglePassword()"
                >
                  <i id="eyeIcon" class="fa fa-eye"></i>
                </span>
              </div>
            </div>

            <button type="submit" class="btn btn-success w-100 py-2 mt-3">
              Entrar
            </button>
          </form>
        </div>
      </div>
    </div>

    <script>
      function togglePassword() {
        const input = document.getElementById("id_password");
        const icon = document.getElementById("eyeIcon");
        if (input.type === "password") {
          input.type = "text";
          icon.classList.replace("fa-eye", "fa-eye-slash");
        } else {
          input.type = "password";
          icon.classList.replace("fa-eye-slash", "fa-eye");
        }
      }
    </script>
  </body>
</html>
